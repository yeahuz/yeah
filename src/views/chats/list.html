<section class="max-w-sm w-full flex-shrink-0 overflow-y-auto">
  <div class="p-4 sticky top-0 shadow-sm dark:drop-shadow-lg bg-white dark:bg-zinc-900">
    <input type="search" name="q" class="form-control" placeholder="<%= it.t("search", { ns: "common" })%>" />
  </div>
  <% if (it.chats?.length) {%>
    <ul class="overflow-y-auto max-h-[42rem]">
      <% it.chats.forEach(function (chat) { %>
        <li>
          <a id="<%= chat.hash_id %>" href="<%= chat.url %>#<%= chat.hash_id %>" class="flex flex-col space-y-2 hover:bg-gray-100 dark:hover:bg-zinc-800 duration-200 p-4">
            <div class="flex items-start justify-between">
              <div class="flex items-center">
                <img src="<%= chat.posting.cover_url %>/width=80" srcset="<%= it.generate_srcset(chat.posting.cover_url, "fit=scale-down", 2) %>" alt="" class="w-12 h-12 object-cover rounded-full overflow-hidden mr-2 flex-shrink-0" />
                <div class="flex flex-col max-w-[200px]">
                  <span class="text-gray-500 dark:text-gray-300 text-sm truncate"><%= chat.members.map(member => member.name).join(', ') %></span>
                  <span class="text-gray-700 dark:text-gray-200 font-medium truncate"><%= chat.posting.title %>asdjakdjak</span>
                </div>
              </div>
              <% if (chat.latest_message) { %>
                <span class="text-gray-500 dark:text-gray-300 text-sm"><%= it.format_relative(chat.latest_message.created_at, new Date()) %></span>
              <% } %>
            </div>
            <% if (chat.latest_message) {%>
              <p class="text-gray-500 dark:text-gray-300 text-sm truncate">
                <%= chat.latest_message.sender.id === it.user.id ? `${it.t("you", { ns: "chats" })}:` : ""%> <%= chat.latest_message.content %>
              </p>
            <% } %>
          </a>
        </li>
      <% }) %>
    </ul>
  <% } %>
</section>
